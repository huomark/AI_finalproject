#include <bits/stdc++.h>
 using i64 = long long;
    #ifdef ONLINE_JUDGE
    std::ifstream fin("input.txt");
    std::ofstream fout("output.txt");
#else
    #define fin std::cin
    #define fout std::cout
#endif
 int main() {
        int n, m, k;
    fin >> n >> m >> k;
        std::map<std::string, int> pos;
    std::vector<bool> occu(n * m);
        while (k--) {
        std::string o;
        fin >> o;
                if (o == "+1") {
            int x, y;
            std::string id;
            fin >> x >> y >> id;
            x--, y--;
            int p = x * m + y;
            while (p < n * m && occu[p]) {
                p++;
            }
            if (p < n * m) {
                occu[p] = true;
                pos[id] = p;
            }
        } else {
            std::string id;
            fin >> id;
                        if (pos.count(id)) {
                auto p = pos[id];
                pos.erase(id);
                occu[p] = false;
                fout << p / m + 1 << " " << p % m + 1 << "\n";
            } else {
                fout << -1 << " " << -1 << "\n";
            }
        }
    }
        return 0;
}